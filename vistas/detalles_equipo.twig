<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Detalles del equipo</title>

		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
		<link rel="stylesheet" href="/vistas/styles/home.css?v=1">
	</head>

	<body>

		<div
			class="container py-4">

			<div class="d-flex justify-content-end gap-2 mb-4 top-buttons">
				<a href="/home" class="btn btn-outline-light btn-sm">Home</a>
				<a href="/logout" class="btn btn-danger btn-sm">Cerrar sesión</a>
			</div>

			<h1 class="fw-bold mb-4 text-warning title-glow">Detalles del equipo</h1>

			<div class="card inazuma-card p-4 mb-4">

				<div class="text-center mb-4">
					<h2 class="mb-3">{{ equipo.nombre }}</h2>

					<img src="{{ equipo.escudo }}" alt="Escudo del equipo" class="img-fluid rounded border mb-3" width="180">

					<p class="mt-3">
						<strong>Propietario del equipo:</strong>
						{{ usuarioNombre }}
					</p>
					<p class="mt-3">
						<strong>Jugadores en el equipo:</strong>
						{{ jugadores|length }}
					</p>
				</div>

				<div
					class="d-flex justify-content-center gap-3">

					{% if equipo.codUsu == usuarioID or rol == "admin" %}
						<a href="/equipo/editar/{{ equipo.codEqui }}" class="btn btn-primary">Editar equipo</a>

						<a href="/equipo/eliminar/{{ equipo.codEqui }}" class="btn btn-danger">
							Eliminar equipo
						</a>
					{% endif %}

				</div>

			</div>

			<h3 class="text-warning mb-3">Jugadores del equipo</h3>

			{% if jugadores is not empty %}

				<div class="table-responsive">
					<table class="table table-dark table-striped table-bordered align-middle">
						<thead>
							<tr>
								<th>Imagen</th>
								<th>Nombre</th>
								<th>Apellido</th>
								<th>Dorsal</th>
								<th>Posición</th>
								<th>Elemento</th>

								{% if equipo.codUsu == usuarioID or rol == "admin" %}
									<th>Acciones</th>
								{% endif %}
							</tr>
						</thead>
						<tbody>
							{% for jugador in jugadores %}
								<tr>
									<td>
										<img src="{{ jugador.imagen }}" alt="Jugador" width="70" class="img-fluid rounded border">
									</td>
									<td>{{ jugador.nombre }}</td>
									<td>{{ jugador.apellido }}</td>
									<td>{{ jugador.dorsal }}</td>
									<td>{{ jugador.posicion }}</td>
									<td>{{ jugador.elementoAEmoji(jugador.elemento) }}</td>

									{% if equipo.codUsu == usuarioID or rol == "admin" %}
										<td>

											<a href="/jugador/expulsar/{{ jugador.codJug }}" class="btn btn-warning btn-sm">
												Expulsar
											</a>

											<a href="/jugador/editar/{{ jugador.codJug }}" class="btn btn-warning btn-sm">
												Editar
											</a>
											<a href="/jugador/eliminar/{{ jugador.codJug }}" class="btn btn-danger btn-sm">
												Eliminar
											</a>

										</td>
									{% endif %}
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>

			{% else %}

				<p class="text-light">Este equipo aún no tiene jugadores.</p>

			{% endif %}

			<footer class="footer-inazuma mt-4">
				Miguel Ángel Postigo Bernal | 2ºDAW
			</footer>

		</div>

	</body>
</html>
